<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Meat Masterclass One | The Kitchen Academy</title>
    <script data-memberstack-app="app_cmlt23jfd002u0stjhljd13s9" src="https://static.memberstack.com/scripts/v2/memberstack.js" type="text/javascript"></script>
    <style>
        body { margin: 0; padding: 0; background: #000; color: #fff; font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        #content { display: none; width: 100%; height: 100%; }
        iframe { border: none; width: 100%; height: 100%; }
        .loading { color: #fff; font-size: 18px; }
    </style>
</head>
<body>
    <div id="loading" class="loading">Verifying Academy Access...</div>

    <div id="content">
        <!-- YOUR GAMMA PRESENTATION IFRAME -->
        <iframe src="https://gamma.app/embed/69qg66w7m0v8t05" allow="fullscreen" title="Meat Masterclass One"></iframe>
    </div>

    <script>
    window.$memberstackDom.getCurrentMember().then(({ data: member }) => {
        if (!member) { 
            window.location.href = "https://www.thekitchenacademy.online/join-us"; 
            return; 
        }

        const plans = (member.planConnections || []).map(c => c.planId);
        const isAcademy = plans.includes('pln_the-kitchen-academy-gi310uow');
        const isPrivate = plans.includes('pln_the-private-kitchen-fv310jek');
        const hasCourse = plans.includes('pln_single-course-meat-masterclass-one-9m3m0uev');

        if (isAcademy || isPrivate || hasCourse) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('content').style.display = 'block'; 
        } else {
            window.location.href = "https://www.thekitchenacademy.online/join-us"; 
        }
    }).catch(err => {
        console.error(err);
        window.location.href = "https://www.thekitchenacademy.online/join-us";
    });
    </script>
</body>
</html>
