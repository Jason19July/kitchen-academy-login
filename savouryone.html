<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Savoury Masterclass One | The Kitchen Academy</title>
    <!-- Memberstack Library -->
    <script data-memberstack-app="app_cmlt23jfd002u0stjhljd13s9" src="https://static.memberstack.com/scripts/v2/memberstack.js" type="text/javascript"></script>
    
    <style>
        /* This makes the course fill the whole screen perfectly */
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; background: #000; overflow: hidden; }
        iframe { border: none; width: 100vw; height: 100vh; }
    </style>
</head>
<body>

    <!-- YOUR GAMMA EMBED (Full Screen Version) -->
    <iframe src="https://gamma.app/embed/3z9059f635k0729" allow="fullscreen" title="Savoury Masterclass One"></iframe>

    <script>
    window.$memberstackDom.getCurrentMember().then(({ data: member }) => {
        // 1. If no member is logged in, send to sales page
        if (!member) {
            window.location.href = "https://www.thekitchenacademy.online/join-us";
            return;
        }

        // 2. Check their plans
        const plans = (member.planConnections || []).map(c => c.planId);
        const isAcademy = plans.includes('pln_the-kitchen-academy-gi310uow');
        const isPrivate = plans.includes('pln_the-private-kitchen-fv310jek');
        const hasCourse = plans.includes('pln_single-course-savoury-masterclass-one-v73m0u7v');

        // 3. If they don't have any of the 3 keys, boot them out
        if (!(isAcademy || isPrivate || hasCourse)) {
            window.location.href = "https://www.thekitchenacademy.online/join-us";
        }
        // If they have access, the script ends and they stay on the page!
    }).catch(() => {
        // Safety net: if Memberstack fails to load, redirect to be safe
        window.location.href = "https://www.thekitchenacademy.online/join-us";
    });
    </script>
</body>
</html>
