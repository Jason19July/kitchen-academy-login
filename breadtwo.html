<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bread Masterclass 2 | The Kitchen Academy</title>
    <!-- Memberstack Library -->
    <script data-memberstack-app="app_cmlt23jfd002u0stjhljd13s9" src="https://static.memberstack.com/scripts/v2/memberstack.js" type="text/javascript"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }
        #content { display: none; width: 100%; height: 100vh; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <div id="content">
        <!-- Your Unique Gamma Embed URL for Bread 2 -->
        <iframe src="https://gamma.app/embed/gyy05gzh5ske2zm" allow="fullscreen"></iframe>
    </div>

    <script>
    window.$memberstackDom.getCurrentMember().then(({ data: member }) => {
        // 1. If not logged in, send to join page
        if (!member) {
            window.location.href = "https://www.thekitchenacademy.online/join-us"; 
            return;
        }

        const memberPlanIds = (member.planConnections || []).map(c => c.planId);
        
        // 2. Verified Master Keys
        const isAcademy = memberPlanIds.includes('pln_the-kitchen-academy-gi310uow');
        const isPrivate = memberPlanIds.includes('pln_the-private-kitchen-fv310jek');

        // 3. Verified Bread 2 Key
        const hasThisCourse = memberPlanIds.includes('pln_single-course-bread-masterclass-two-m6zr0uim');

        // 4. Permission Check
        if (isAcademy || isPrivate || hasThisCourse) {
            document.getElementById('content').style.display = 'block'; 
        } else {
            window.location.href = "https://www.thekitchenacademy.online/join-us"; 
        }
    });
    </script>
</body>
</html>
