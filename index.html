<script>
window.$memberstackDom.getCurrentMember().then(({ data: member }) => {
    if (!member) {
        document.getElementById('logged-out-view').style.display = 'block';
    } else {
        document.getElementById('logged-in-view').style.display = 'block';
        const memberPlanIds = (member.planConnections || []).map(c => c.planId);
        
        const isAcademy = memberPlanIds.includes('pln_the-kitchen-academy-gi310uow');
        const isPrivate = memberPlanIds.includes('pln_the-private-kitchen-fv310jek');

        // --- SHOW BUTTONS LOGIC ---

        // 1. Bread 1: Show if Academy OR Private OR Single Buyer
        if (isAcademy || isPrivate || memberPlanIds.includes('pln_single-course-bread-masterclass-one-hl3m0uqv')) {
            document.getElementById('btn-bread1').style.display = 'block';
        }

        // 2. Bread 2: Show if Academy OR Private OR Single Buyer
        if (isAcademy || isPrivate || memberPlanIds.includes('pln_single-course-bread-masterclass-two-m6zr0uim')) {
            document.getElementById('btn-bread2').style.display = 'block';
        }

        // 3. Steakhouse: Show if Academy OR Private OR Single Buyer
        if (isAcademy || isPrivate || memberPlanIds.includes('pln_single-course-steakhouse-masterclass-7p3m0uhv')) {
            document.getElementById('btn-steakhouse').style.display = 'block';
        }

        // 4. Other Academy Courses: Show if Academy OR Private
        if (isAcademy || isPrivate) {
            document.getElementById('btn-savoury').style.display = 'block';
            document.getElementById('btn-sweet').style.display = 'block';
            document.getElementById('btn-chicken').style.display = 'block';
            document.getElementById('btn-meat').style.display = 'block';
        }

        // 5. Asian: Show if Private OR Single Buyer
        if (isPrivate || memberPlanIds.includes('pln_asian-masterclass-one-hczq0up7')) {
            document.getElementById('btn-asian').style.display = 'block';
        }
    }
});
</script>
