<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bread Masterclass | The Kitchen Academy</title>
    <!-- Memberstack Library -->
    <script data-memberstack-app="app_cmlt23jfd002u0stjhljd13s9" src="https://static.memberstack.com/scripts/v2/memberstack.js" type="text/javascript"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        #content { display: none; width: 100%; height: 100vh; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>

    <div id="content">
        <!-- YOUR GAMMA IFRAME HERE -->
        <iframe src="YOUR_GAMMA_URL_FOR_BREAD_ONE"></iframe>
    </div>

    <script>
    window.$memberstackDom.getCurrentMember().then(({ data: member }) => {
        // 1. Redirect to join page if not logged in
        if (!member) {
            window.location.href = "https://www.thekitchenacademy.online/join-us"; 
            return;
        }

        const memberPlanIds = (member.planConnections || []).map(c => c.planId);
        
        // 2. VERIFIED MASTER KEYS
        const isAcademy = memberPlanIds.includes('pln_the-kitchen-academy-gi310uow');
        const isPrivate = memberPlanIds.includes('pln_the-private-kitchen-fv310jek');

        // 3. SPECIFIC COURSE KEY (Bread One)
        const hasThisCourse = memberPlanIds.includes('pln_single-course-bread-masterclass-one-hl3m0uqv');

        // 4. THE PERMISSION CHECK
        if (isAcademy || isPrivate || hasThisCourse) {
            document.getElementById('content').style.display = 'block'; 
        } else {
            // If they don't have access, send them to the sales page
            window.location.href = "https://www.thekitchenacademy.online/join-us"; 
        }
    });
    </script>
</body>
</html>
